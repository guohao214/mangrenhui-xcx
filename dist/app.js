"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = App({
  globalData: {
    baseUrl: "https://api.mangrenhui.cn/"
    // baseUrl: "http://127.0.0.1:8080/"
  },
  login: function login() {
    // return;
    var self = this;
    wx.login({
      success: function success(data) {
        self.get("xcxLogin/authorize", { code: data.code }).then(function (data) {
          wx.setStorageSync("session_id", data.data);
        });
      }
    });
  },
  onLaunch: function onLaunch() {
    this.login();
  },
  onShow: function onShow() {},
  onHide: function onHide() {},

  request: function request(method, url, data) {
    var _this = this;

    return new Promise(function (res, rej) {
      wx.showLoading({
        title: "加载中..."
      });
      wx.request({
        method: method,
        header: {
          "x-requested-with": "xmlhttprequest",
          "Content-Type": "application/x-www-form-urlencoded",
          "x-xcx": "xcx",
          token: wx.getStorageSync("session_id")
        },
        url: _this.globalData.baseUrl + url,
        data: data,
        success: function success(result) {
          var data = result.data;
          if (data.status == 1) res(result.data);else if (data.status == -999) {
            // 跳转到绑定页
            wx.navigateTo({
              url: "/pages/bind/index"
            });
          } else {
            rej(data);
          }
        },
        fail: function fail(error) {
          return rej(error);
        },
        complete: function complete() {
          setTimeout(function () {
            return wx.hideLoading();
          }, 500);
        }
      });
    });
  },
  get: function get(url) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    return this.request("GET", url, data);
  },
  post: function post(url, data) {
    return this.request("POST", url, data);
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC53eGEiXSwibmFtZXMiOlsiZ2xvYmFsRGF0YSIsImJhc2VVcmwiLCJsb2dpbiIsInNlbGYiLCJ3eCIsInN1Y2Nlc3MiLCJkYXRhIiwiZ2V0IiwiY29kZSIsInRoZW4iLCJzZXRTdG9yYWdlU3luYyIsIm9uTGF1bmNoIiwib25TaG93Iiwib25IaWRlIiwicmVxdWVzdCIsIm1ldGhvZCIsInVybCIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJzaG93TG9hZGluZyIsInRpdGxlIiwiaGVhZGVyIiwidG9rZW4iLCJnZXRTdG9yYWdlU3luYyIsInJlc3VsdCIsInN0YXR1cyIsIm5hdmlnYXRlVG8iLCJmYWlsIiwiZXJyb3IiLCJjb21wbGV0ZSIsInNldFRpbWVvdXQiLCJoaWRlTG9hZGluZyIsInBvc3QiXSwibWFwcGluZ3MiOiI7Ozs7OztBQTBERUEsY0FBWTtBQUNWQyxhQUFTO0FBQ1Q7QUFGVSxHO0FBSVpDLFNBQU8saUJBQVc7QUFDaEI7QUFDQSxRQUFJQyxPQUFPLElBQVg7QUFDQUMsT0FBR0YsS0FBSCxDQUFTO0FBQ1BHLGVBQVMsaUJBQVNDLElBQVQsRUFBZTtBQUN0QkgsYUFBS0ksR0FBTCxDQUFTLG9CQUFULEVBQStCLEVBQUVDLE1BQU1GLEtBQUtFLElBQWIsRUFBL0IsRUFBb0RDLElBQXBELENBQXlELGdCQUFRO0FBQy9ETCxhQUFHTSxjQUFILENBQWtCLFlBQWxCLEVBQWdDSixLQUFLQSxJQUFyQztBQUNELFNBRkQ7QUFHRDtBQUxNLEtBQVQ7QUFPRCxHO0FBQ0RLLFUsc0JBQVc7QUFDVCxTQUFLVCxLQUFMO0FBQ0QsRztBQUNEVSxRLG9CQUFTLENBQUUsQztBQUNYQyxRLG9CQUFTLENBQUUsQzs7QUFDWEMsV0FBUyxpQkFBU0MsTUFBVCxFQUFpQkMsR0FBakIsRUFBc0JWLElBQXRCLEVBQTRCO0FBQUE7O0FBQ25DLFdBQU8sSUFBSVcsT0FBSixDQUFZLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQy9CZixTQUFHZ0IsV0FBSCxDQUFlO0FBQ2JDLGVBQU87QUFETSxPQUFmO0FBR0FqQixTQUFHVSxPQUFILENBQVc7QUFDVEMsZ0JBQVFBLE1BREM7QUFFVE8sZ0JBQVE7QUFDTiw4QkFBb0IsZ0JBRGQ7QUFFTiwwQkFBZ0IsbUNBRlY7QUFHTixtQkFBUyxLQUhIO0FBSU5DLGlCQUFPbkIsR0FBR29CLGNBQUgsQ0FBa0IsWUFBbEI7QUFKRCxTQUZDO0FBUVRSLGFBQUssTUFBS2hCLFVBQUwsQ0FBZ0JDLE9BQWhCLEdBQTBCZSxHQVJ0QjtBQVNUVixrQkFUUztBQVVURCxpQkFBUyx5QkFBVTtBQUNqQixjQUFJQyxPQUFPbUIsT0FBT25CLElBQWxCO0FBQ0EsY0FBSUEsS0FBS29CLE1BQUwsSUFBZSxDQUFuQixFQUFzQlIsSUFBSU8sT0FBT25CLElBQVgsRUFBdEIsS0FDSyxJQUFJQSxLQUFLb0IsTUFBTCxJQUFlLENBQUMsR0FBcEIsRUFBeUI7QUFDNUI7QUFDQXRCLGVBQUd1QixVQUFILENBQWM7QUFDWlgsbUJBQUs7QUFETyxhQUFkO0FBR0QsV0FMSSxNQUtFO0FBQ0xHLGdCQUFJYixJQUFKO0FBQ0Q7QUFDRixTQXJCUTtBQXNCVHNCLGNBQU07QUFBQSxpQkFBU1QsSUFBSVUsS0FBSixDQUFUO0FBQUEsU0F0Qkc7QUF1QlRDLGtCQUFVLG9CQUFNO0FBQ2RDLHFCQUFXO0FBQUEsbUJBQU0zQixHQUFHNEIsV0FBSCxFQUFOO0FBQUEsV0FBWCxFQUFtQyxHQUFuQztBQUNEO0FBekJRLE9BQVg7QUEyQkQsS0EvQk0sQ0FBUDtBQWdDRCxHO0FBQ0R6QixPQUFLLGFBQVNTLEdBQVQsRUFBeUI7QUFBQSxRQUFYVixJQUFXLHVFQUFKLEVBQUk7O0FBQzVCLFdBQU8sS0FBS1EsT0FBTCxDQUFhLEtBQWIsRUFBb0JFLEdBQXBCLEVBQXlCVixJQUF6QixDQUFQO0FBQ0QsRztBQUNEMkIsUUFBTSxjQUFTakIsR0FBVCxFQUFjVixJQUFkLEVBQW9CO0FBQ3hCLFdBQU8sS0FBS1EsT0FBTCxDQUFhLE1BQWIsRUFBcUJFLEdBQXJCLEVBQTBCVixJQUExQixDQUFQO0FBQ0QiLCJmaWxlIjoiYXBwLnd4YSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcbiAgY29uZmlnOiB7XG4gICAgcGVybWlzc2lvbjoge1xuICAgICAgLy8gXCJzY29wZS51c2VySW5mb1wiOiB7XG4gICAgICAvLyAgIGRlc2M6IFwi6I635Y+W5oKo55qE5Z+65pys5L+h5oGvXCJcbiAgICAgIC8vIH0sXG4gICAgICBcInNjb3BlLnVzZXJMb2NhdGlvblwiOiB7XG4gICAgICAgIGRlc2M6IFwi5L2g55qE5L2N572u5L+h5oGv5bCG55So5LqO6K6h566X5LiO6Zeo5bqX55qE6Led56a7XCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHVzaW5nQ29tcG9uZW50czoge1xuICAgICAgXCJsYXlvdXQtaGVhZFwiOiBcImxheW91dC9oZWFkXCJcbiAgICAgIC8vICdsYXlvdXQtZm9vdCc6ICdsYXlvdXQvZm9vdCdcbiAgICB9LFxuICAgIHBhZ2VzOiBbXSxcbiAgICB3aW5kb3c6IHtcbiAgICAgIGJhY2tncm91bmRUZXh0U3R5bGU6IFwiZGFya1wiLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNlZmVmZWZcIixcbiAgICAgIG5hdmlnYXRpb25CYXJCYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmZmZmZlwiLFxuICAgICAgbmF2aWdhdGlvbkJhclRpdGxlVGV4dDogXCLnm7LkurrojZ9cIixcbiAgICAgIG5hdmlnYXRpb25CYXJUZXh0U3R5bGU6IFwiYmxhY2tcIlxuICAgIH0sXG4gICAgdGFiQmFyOiB7XG4gICAgICBjb2xvcjogXCIjOGE4YThhXCIsXG4gICAgICBzZWxlY3RlZENvbG9yOiBcIiNmZmI0MDBcIixcbiAgICAgIGJvcmRlclN0eWxlOiBcImJsYWNrXCIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmZmZmZlwiLFxuICAgICAgbGlzdDogW1xuICAgICAgICB7XG4gICAgICAgICAgcGFnZVBhdGg6IFwicGFnZXMvYXJ0aWNsZS9pbmRleFwiLFxuICAgICAgICAgIGljb25QYXRoOiBcImNvbW1vbi9hc3NldHMvdGFiLzAyLnBuZ1wiLFxuICAgICAgICAgIHNlbGVjdGVkSWNvblBhdGg6IFwiY29tbW9uL2Fzc2V0cy90YWIvMDIxLnBuZ1wiLFxuICAgICAgICAgIHRleHQ6IFwi5ZOB54mMXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHBhZ2VQYXRoOiBcInBhZ2VzL2FwcG9pbnRtZW50L2luZGV4XCIsXG4gICAgICAgICAgaWNvblBhdGg6IFwiY29tbW9uL2Fzc2V0cy90YWIvMDMucG5nXCIsXG4gICAgICAgICAgc2VsZWN0ZWRJY29uUGF0aDogXCJjb21tb24vYXNzZXRzL3RhYi8wMzEucG5nXCIsXG4gICAgICAgICAgdGV4dDogXCLpooTnuqZcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGFnZVBhdGg6IFwicGFnZXMvcGF5L2luZGV4XCIsXG4gICAgICAgICAgaWNvblBhdGg6IFwiY29tbW9uL2Fzc2V0cy90YWIvMDEucG5nXCIsXG4gICAgICAgICAgc2VsZWN0ZWRJY29uUGF0aDogXCJjb21tb24vYXNzZXRzL3RhYi8wMTEucG5nXCIsXG4gICAgICAgICAgdGV4dDogXCLkubDljZVcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGFnZVBhdGg6IFwicGFnZXMvY2VudGVyL2luZGV4XCIsXG4gICAgICAgICAgaWNvblBhdGg6IFwiY29tbW9uL2Fzc2V0cy90YWIvMDQucG5nXCIsXG4gICAgICAgICAgc2VsZWN0ZWRJY29uUGF0aDogXCJjb21tb24vYXNzZXRzL3RhYi8wNDEucG5nXCIsXG4gICAgICAgICAgdGV4dDogXCLmiJHnmoRcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBuZXR3b3JrVGltZW91dDoge1xuICAgICAgcmVxdWVzdDogMTAwMDBcbiAgICB9XG4gIH0sXG4gIGdsb2JhbERhdGE6IHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXBpLm1hbmdyZW5odWkuY24vXCJcbiAgICAvLyBiYXNlVXJsOiBcImh0dHA6Ly8xMjcuMC4wLjE6ODA4MC9cIlxuICB9LFxuICBsb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgLy8gcmV0dXJuO1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICB3eC5sb2dpbih7XG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHNlbGYuZ2V0KFwieGN4TG9naW4vYXV0aG9yaXplXCIsIHsgY29kZTogZGF0YS5jb2RlIH0pLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgd3guc2V0U3RvcmFnZVN5bmMoXCJzZXNzaW9uX2lkXCIsIGRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBvbkxhdW5jaCgpIHtcbiAgICB0aGlzLmxvZ2luKCk7XG4gIH0sXG4gIG9uU2hvdygpIHt9LFxuICBvbkhpZGUoKSB7fSxcbiAgcmVxdWVzdDogZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICB3eC5zaG93TG9hZGluZyh7XG4gICAgICAgIHRpdGxlOiBcIuWKoOi9veS4rS4uLlwiXG4gICAgICB9KTtcbiAgICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgaGVhZGVyOiB7XG4gICAgICAgICAgXCJ4LXJlcXVlc3RlZC13aXRoXCI6IFwieG1saHR0cHJlcXVlc3RcIixcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgICAgICAgIFwieC14Y3hcIjogXCJ4Y3hcIixcbiAgICAgICAgICB0b2tlbjogd3guZ2V0U3RvcmFnZVN5bmMoXCJzZXNzaW9uX2lkXCIpXG4gICAgICAgIH0sXG4gICAgICAgIHVybDogdGhpcy5nbG9iYWxEYXRhLmJhc2VVcmwgKyB1cmwsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3VsdCA9PiB7XG4gICAgICAgICAgbGV0IGRhdGEgPSByZXN1bHQuZGF0YTtcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gMSkgcmVzKHJlc3VsdC5kYXRhKTtcbiAgICAgICAgICBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAtOTk5KSB7XG4gICAgICAgICAgICAvLyDot7PovazliLDnu5HlrprpobVcbiAgICAgICAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICAgICAgICB1cmw6IFwiL3BhZ2VzL2JpbmQvaW5kZXhcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlaihkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZhaWw6IGVycm9yID0+IHJlaihlcnJvciksXG4gICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB3eC5oaWRlTG9hZGluZygpLCA1MDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbih1cmwsIGRhdGEgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoXCJHRVRcIiwgdXJsLCBkYXRhKTtcbiAgfSxcbiAgcG9zdDogZnVuY3Rpb24odXJsLCBkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChcIlBPU1RcIiwgdXJsLCBkYXRhKTtcbiAgfVxufTsiXX0=