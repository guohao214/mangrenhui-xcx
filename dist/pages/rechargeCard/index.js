'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Page({
  data: {
    cards: [],
    currentCard: {
      recharge_card_id: ''
    }
  },
  onLoad: function onLoad(options) {
    // console.log(options)
  },

  recharge: function recharge() {
    var app = getApp();
    var id = this.data.currentCard.recharge_card_id;
    if (!id) return wx.message('请选择充值卡');

    app.get('rechargeCard/buyRechargeCard/' + id).then(function (data) {
      var result = data.data.content;
      wx.requestPayment(Object.assign({}, result, {
        success: function success(res) {
          console.log(res);
        },
        fail: function fail(res) {
          console.log(res);
        }
      }));
    });
  },


  onShow: function onShow() {
    this.getCards();
  },

  //  查看充值协议
  goAgreement: function goAgreement() {
    wx.navigateTo({
      url: '/pages/h5/index?url=https%3A%2F%2Fapi.mdshijie.com%2Fagreement.html'
    });
  },
  chooseCard: function chooseCard(e) {
    var card = this.data.cards[e.currentTarget.dataset.index];
    this.setData({
      currentCard: card
    });
  },
  goForm: function goForm(e) {
    var id = e.currentTarget.dataset.id;
    wx.navigateTo({
      url: '/pages/pet/form?id=' + id
    });
  },
  addPet: function addPet() {
    wx.navigateTo({
      url: '/pages/pet/form'
    });
  },


  getCards: function getCards() {
    var _this = this;

    var app = getApp();
    app.get('rechargeCard/list').then(function (data) {
      var result = data.data;
      _this.setData({
        currentCard: result.content[0],
        cards: result.content
      });
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4Lnd4cCJdLCJuYW1lcyI6WyJkYXRhIiwiY2FyZHMiLCJjdXJyZW50Q2FyZCIsInJlY2hhcmdlX2NhcmRfaWQiLCJvbkxvYWQiLCJvcHRpb25zIiwicmVjaGFyZ2UiLCJhcHAiLCJnZXRBcHAiLCJpZCIsInd4IiwibWVzc2FnZSIsImdldCIsInRoZW4iLCJyZXN1bHQiLCJjb250ZW50IiwicmVxdWVzdFBheW1lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJzdWNjZXNzIiwicmVzIiwiY29uc29sZSIsImxvZyIsImZhaWwiLCJvblNob3ciLCJnZXRDYXJkcyIsImdvQWdyZWVtZW50IiwibmF2aWdhdGVUbyIsInVybCIsImNob29zZUNhcmQiLCJlIiwiY2FyZCIsImN1cnJlbnRUYXJnZXQiLCJkYXRhc2V0IiwiaW5kZXgiLCJzZXREYXRhIiwiZ29Gb3JtIiwiYWRkUGV0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFjSUEsUUFBTTtBQUNKQyxXQUFPLEVBREg7QUFFSkMsaUJBQWE7QUFDWEMsd0JBQWtCO0FBRFA7QUFGVCxHO0FBTU5DLFVBQVEsZ0JBQVVDLE9BQVYsRUFBbUI7QUFDekI7QUFDRCxHOztBQUVEQyxVLHNCQUFXO0FBQ1QsUUFBSUMsTUFBTUMsUUFBVjtBQUNBLFFBQU1DLEtBQUssS0FBS1QsSUFBTCxDQUFVRSxXQUFWLENBQXNCQyxnQkFBakM7QUFDQSxRQUFJLENBQUNNLEVBQUwsRUFDRSxPQUFPQyxHQUFHQyxPQUFILENBQVcsUUFBWCxDQUFQOztBQUVGSixRQUFJSyxHQUFKLG1DQUF3Q0gsRUFBeEMsRUFBOENJLElBQTlDLENBQW1ELGdCQUFRO0FBQ3pELFVBQUlDLFNBQVNkLEtBQUtBLElBQUwsQ0FBVWUsT0FBdkI7QUFDQUwsU0FBR00sY0FBSCxDQUFrQkMsT0FBT0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JKLE1BQWxCLEVBQTBCO0FBQzFDSyxlQUQwQyxtQkFDbENDLEdBRGtDLEVBQzdCO0FBQ1hDLGtCQUFRQyxHQUFSLENBQVlGLEdBQVo7QUFDRCxTQUh5QztBQUkxQ0csWUFKMEMsZ0JBSXJDSCxHQUpxQyxFQUloQztBQUNSQyxrQkFBUUMsR0FBUixDQUFZRixHQUFaO0FBQ0Q7QUFOeUMsT0FBMUIsQ0FBbEI7QUFRRCxLQVZEO0FBV0QsRzs7O0FBRURJLFVBQVEsa0JBQVk7QUFDbEIsU0FBS0MsUUFBTDtBQUNELEc7O0FBRUQ7QUFDQUMsYSx5QkFBYztBQUNaaEIsT0FBR2lCLFVBQUgsQ0FBYztBQUNaQyxXQUFLO0FBRE8sS0FBZDtBQUdELEc7QUFFREMsWSxzQkFBV0MsQyxFQUFHO0FBQ1osUUFBTUMsT0FBTyxLQUFLL0IsSUFBTCxDQUFVQyxLQUFWLENBQWdCNkIsRUFBRUUsYUFBRixDQUFnQkMsT0FBaEIsQ0FBd0JDLEtBQXhDLENBQWI7QUFDQSxTQUFLQyxPQUFMLENBQWE7QUFDWGpDLG1CQUFhNkI7QUFERixLQUFiO0FBR0QsRztBQUVESyxRLGtCQUFPTixDLEVBQUc7QUFDUixRQUFNckIsS0FBS3FCLEVBQUVFLGFBQUYsQ0FBZ0JDLE9BQWhCLENBQXdCeEIsRUFBbkM7QUFDQUMsT0FBR2lCLFVBQUgsQ0FBYztBQUNaQyxXQUFLLHdCQUF3Qm5CO0FBRGpCLEtBQWQ7QUFHRCxHO0FBRUQ0QixRLG9CQUFTO0FBQ1AzQixPQUFHaUIsVUFBSCxDQUFjO0FBQ1pDLFdBQUs7QUFETyxLQUFkO0FBR0QsRzs7O0FBRURILFlBQVUsb0JBQVk7QUFBQTs7QUFDcEIsUUFBSWxCLE1BQU1DLFFBQVY7QUFDQUQsUUFBSUssR0FBSixDQUFRLG1CQUFSLEVBQTZCQyxJQUE3QixDQUFrQyxnQkFBUTtBQUN4QyxVQUFJQyxTQUFTZCxLQUFLQSxJQUFsQjtBQUNBLFlBQUttQyxPQUFMLENBQWE7QUFDWGpDLHFCQUFhWSxPQUFPQyxPQUFQLENBQWUsQ0FBZixDQURGO0FBRVhkLGVBQU9hLE9BQU9DO0FBRkgsT0FBYjtBQUlELEtBTkQ7QUFPRCIsImZpbGUiOiJpbmRleC53eHAiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gICAgY29uZmlnOiB7XG4gICAgICBuYXZpZ2F0aW9uQmFyVGl0bGVUZXh0OiAn5YWF5YC85Y2hJyxcbiAgICAgIG5hdmlnYXRpb25CYXJCYWNrZ3JvdW5kQ29sb3I6ICcjRThFOEU4JyxcbiAgICAgIG5hdmlnYXRpb25CYXJUZXh0U3R5bGU6ICdibGFjaycsXG4gICAgICB1c2luZ0NvbXBvbmVudHM6IHtcbiAgICAgICAgJ3d4Yy1kaWFsb2cnOiAnQG1pbnVpL3d4Yy1kaWFsb2cnLFxuICAgICAgICAnd3hjLWFibm9yJzogJ0BtaW51aS93eGMtYWJub3InLFxuICAgICAgICAnd3hjLWVsaXAnOiAnQG1pbnVpL3d4Yy1lbGlwJyxcbiAgICAgICAgJ3d4Yy1mbGV4JzogJ0BtaW51aS93eGMtZmxleCcsXG4gICAgICAgICd3eGMtaWNvbic6ICdAbWludWkvd3hjLWljb24nLFxuICAgICAgICAnd3hjLWF2YXRhcic6ICdAbWludWkvd3hjLWF2YXRhcicsXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhOiB7XG4gICAgICBjYXJkczogW10sXG4gICAgICBjdXJyZW50Q2FyZDoge1xuICAgICAgICByZWNoYXJnZV9jYXJkX2lkOiAnJ1xuICAgICAgfSxcbiAgICB9LFxuICAgIG9uTG9hZDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKG9wdGlvbnMpXG4gICAgfSxcblxuICAgIHJlY2hhcmdlKCkge1xuICAgICAgbGV0IGFwcCA9IGdldEFwcCgpXG4gICAgICBjb25zdCBpZCA9IHRoaXMuZGF0YS5jdXJyZW50Q2FyZC5yZWNoYXJnZV9jYXJkX2lkXG4gICAgICBpZiAoIWlkKVxuICAgICAgICByZXR1cm4gd3gubWVzc2FnZSgn6K+36YCJ5oup5YWF5YC85Y2hJylcblxuICAgICAgYXBwLmdldChgcmVjaGFyZ2VDYXJkL2J1eVJlY2hhcmdlQ2FyZC8ke2lkfWApLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGxldCByZXN1bHQgPSBkYXRhLmRhdGEuY29udGVudFxuICAgICAgICB3eC5yZXF1ZXN0UGF5bWVudChPYmplY3QuYXNzaWduKHt9LCByZXN1bHQsIHtcbiAgICAgICAgICBzdWNjZXNzKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbChyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgb25TaG93OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmdldENhcmRzKClcbiAgICB9LFxuXG4gICAgLy8gIOafpeeci+WFheWAvOWNj+iurlxuICAgIGdvQWdyZWVtZW50KCkge1xuICAgICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICAgIHVybDogJy9wYWdlcy9oNS9pbmRleD91cmw9aHR0cHMlM0ElMkYlMkZhcGkubWRzaGlqaWUuY29tJTJGYWdyZWVtZW50Lmh0bWwnXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBjaG9vc2VDYXJkKGUpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmRhdGEuY2FyZHNbZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXhdXG4gICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICBjdXJyZW50Q2FyZDogY2FyZFxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgZ29Gb3JtKGUpIHtcbiAgICAgIGNvbnN0IGlkID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaWRcbiAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICB1cmw6ICcvcGFnZXMvcGV0L2Zvcm0/aWQ9JyArIGlkXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBhZGRQZXQoKSB7XG4gICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgdXJsOiAnL3BhZ2VzL3BldC9mb3JtJ1xuICAgICAgfSlcbiAgICB9LFxuXG4gICAgZ2V0Q2FyZHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBhcHAgPSBnZXRBcHAoKVxuICAgICAgYXBwLmdldCgncmVjaGFyZ2VDYXJkL2xpc3QnKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gZGF0YS5kYXRhXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgY3VycmVudENhcmQ6IHJlc3VsdC5jb250ZW50WzBdLFxuICAgICAgICAgIGNhcmRzOiByZXN1bHQuY29udGVudFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LFxuICB9Il19